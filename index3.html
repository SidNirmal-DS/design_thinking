
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Management Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Subtle Accents (#e05d38, #ffffff, #f3f4f6, #4b5563) -->
    <!-- Application Structure Plan: The application is designed as a multi-page simulated SPA within a single HTML file. It features a dedicated landing page (hero section) and separate content "pages" for each major product management theme (Strategy, Planning, Execution, Analysis). A persistent top navigation bar allows users to switch between these pages. This structure enhances the "website" feel, improves navigability for distinct content blocks, and provides a clear entry point. Hover animations on cards add to the interactive and professional aesthetic. -->
    <!-- Visualization & Content Choices: 
    - Hero Section: Goal=Inform -> Viz=Headline/Text/Button + 3D Animated Background (Three.js). Interaction=Button to navigate. Justification: Creates a professional and engaging first impression. No SVG used.
    - Product Vision Board: Goal=Organize -> Viz=Styled HTML Grid. Interaction=Gemini API for vision generation. Justification: Effective for structured text inputs/outputs. No SVG used.
    - User Journey Map: Goal=Change -> Viz=Horizontal Bar Chart (Chart.js). Justification: Compares experience scores across stages. No SVG used.
    - Business Model Canvas: Goal=Organize -> Viz=Styled HTML Grid. Justification: Standard visual representation of the framework. No SVG used.
    - Agile Roadmap: Goal=Change -> Viz=Timeline (Styled HTML Grid). Justification: Shows progression over time. No SVG/Mermaid used.
    - OKRs Breakdown: Goal=Compare -> Viz=Radar Chart (Chart.js). Justification: Visualizes balance across objectives. No SVG used.
    - ICE Scoring: Goal=Relationships -> Viz=Bubble Chart (Chart.js). Justification: Shows relationship between three variables (Impact, Confidence, Effort). No SVG used.
    - PRD Structure: Goal=Organize -> Viz=Donut Chart (Chart.js). Justification: Shows composition of PRD sections. No SVG used.
    - User Stories & Acceptance Criteria: Goal=Inform -> Viz=Text Area/Button. Interaction=Gemini API for story generation. Justification: Practical application of AI for PM tasks. No SVG used.
    - OMTM: Goal=Inform -> Viz=KPI Display (Styled HTML). Justification: Highlights a single key metric impactfully. No SVG used.
    - Tracking Success Metrics: Goal=Change -> Viz=Line Chart (Chart.js). Justification: Shows trends over time. No SVG used.
    CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Secondary color for overall background */
            color: #4b5563; /* Secondary Foreground for general text */
        }
        .text-primary { color: #e05d38; } /* Primary color */
        .bg-primary { background-color: #e05d38; } /* Primary color */
        .text-primary-foreground { color: #ffffff; } /* Primary Foreground */
        .bg-primary-foreground { background-color: #ffffff; } /* Primary Foreground */
        .text-secondary { color: #f3f4f6; } /* Secondary color */
        .bg-secondary { background-color: #f3f4f6; } /* Secondary color */
        .text-secondary-foreground { color: #4b5563; } /* Secondary Foreground */
        .bg-secondary-foreground { background-color: #4b5563; } /* Secondary Foreground */

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        .navbar {
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: rgba(255, 255, 255, 0.9); /* Primary Foreground with transparency */
            backdrop-filter: blur(8px);
        }
        .nav-link {
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
        }
        .nav-link.active {
            background-color: #e05d38; /* Primary color */
            color: #ffffff; /* Primary Foreground */
            font-weight: 600;
        }
        .nav-link:hover:not(.active) {
            background-color: #f3f4f6; /* Secondary color */
            color: #e05d38; /* Primary color */
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .kpi-number {
            font-size: 4rem;
            font-weight: 900;
            color: #e05d38; /* Primary color */
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #e05d38; /* Primary color */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .page-section {
            display: none; /* Hidden by default */
        }
        .page-section.active {
            display: block; /* Shown when active */
        }
        #hero-canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0; /* Behind text content */
        }
        #hero-canvas {
            display: block;
        }
    </style>
</head>
<body class="antialiased">

    <div class="min-h-screen flex flex-col">
        <nav class="navbar w-full py-4 shadow-md">
            <div class="container mx-auto flex justify-between items-center px-4 sm:px-6 lg:px-8">
                <div class="text-2xl font-black text-primary">PM Hub</div>
                <div class="flex space-x-4 md:space-x-8">
                    <a href="#home" class="nav-link active" data-page="home">Home</a>
                    <a href="#strategy" class="nav-link" data-page="strategy">Strategy</a>
                    <a href="#planning" class="nav-link" data-page="planning">Planning</a>
                    <a href="#execution" class="nav-link" data-page="execution">Execution</a>
                    <a href="#analysis" class="nav-link" data-page="analysis">Analysis</a>
                </div>
            </div>
        </nav>

        <main class="flex-grow">
            <!-- Home Page / Hero Section -->
            <section id="home-page" class="page-section active bg-primary-foreground py-20 md:py-32 flex items-center justify-center relative overflow-hidden">
                <div id="hero-canvas-container">
                    <canvas id="hero-canvas"></canvas>
                </div>
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                    <h1 class="text-5xl md:text-7xl font-black text-secondary-foreground mb-6 leading-tight">
                        Empower Your Product Vision
                    </h1>
                    <p class="text-xl md:text-2xl text-gray-600 max-w-4xl mx-auto mb-10">
                        Navigate the essential frameworks and tools for modern Product Managers, from ideation to iteration.
                    </p>
                    <button id="exploreBtn" class="px-8 py-4 bg-primary text-primary-foreground text-lg font-bold rounded-full shadow-lg hover:bg-opacity-90 transition-all duration-300 transform hover:scale-105">
                        Explore the Framework
                    </button>
                </div>
            </section>

            <!-- Strategy & Vision Page -->
            <section id="strategy-page" class="page-section py-12">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 space-y-12">
                    <h2 class="text-3xl font-bold text-center mb-2 text-secondary-foreground">Strategy & Vision</h2>
                    <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto">This initial phase is about understanding the 'why'. Here, we define the product's purpose, identify our target audience, and map out the user's experience to uncover key needs and pain points.</p>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="card p-6 lg:col-span-2">
                            <h3 class="text-xl font-bold mb-4 text-center text-secondary-foreground">Product Vision Board</h3>
                            <p class="text-center text-gray-600 mb-6">The Vision Board is your North Star. It's a simple yet powerful tool to align everyone on the product's core essence and strategic direction.</p>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                <div class="bg-secondary p-4 rounded-lg">
                                    <h4 class="font-bold text-secondary-foreground">Product Name</h4>
                                    <input type="text" id="productNameInput" class="w-full p-2 border border-gray-300 rounded-md text-sm text-gray-800" value="Grocery App" />
                                </div>
                                <div class="bg-secondary p-4 rounded-lg">
                                    <h4 class="font-bold text-secondary-foreground">What it does?</h4>
                                    <input type="text" id="productValueInput" class="w-full p-2 border border-gray-300 rounded-md text-sm text-gray-800" value="Provides fresh groceries with fast delivery." />
                                </div>
                                <div class="bg-secondary p-4 rounded-lg md:col-span-1 flex flex-col justify-between">
                                    <div>
                                        <h4 class="font-bold text-secondary-foreground">Vision</h4>
                                        <p id="productVisionOutput" class="text-sm text-gray-600 mt-2">"A seamless grocery shopping experience for busy professionals."</p>
                                    </div>
                                    <button id="generateVisionBtn" class="mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-opacity-90 transition-colors flex items-center justify-center mx-auto text-sm">
                                        Generate Vision ✨
                                    </button>
                                    <div id="visionLoading" class="hidden loading-spinner mt-2 mx-auto"></div>
                                </div>
                                <div class="bg-secondary p-4 rounded-lg">
                                    <h4 class="font-bold text-secondary-foreground">Target Group</h4>
                                    <p class="text-sm text-gray-600">Urban professionals, 25-40, tech-savvy, value convenience.</p>
                                </div>
                                <div class="bg-secondary p-4 rounded-lg">
                                    <h4 class="font-bold text-secondary-foreground">Needs</h4>
                                    <p class="text-sm text-gray-600">Save time on grocery trips, easy repeat orders, healthy meal suggestions.</p>
                                </div>
                                <div class="bg-secondary p-4 rounded-lg md:col-span-1">
                                    <h4 class="font-bold text-secondary-foreground">Product</h4>
                                    <p class="text-sm text-gray-600">Mobile app with 1-hour delivery, subscription options, and AI-powered recipe recommendations.</p>
                                </div>
                                <div class="bg-secondary p-4 rounded-lg md:col-span-2">
                                    <h4 class="font-bold text-secondary-foreground">Business Goals</h4>
                                    <p class="text-sm text-gray-600">Achieve 10% market share in metro cities within 2 years. Increase average order value by 15% through recommendations.</p>
                                </div>
                            </div>
                        </div>

                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4 text-center text-secondary-foreground">User Journey Map Analysis</h3>
                            <p class="text-center text-gray-600 mb-6">Visualizing the user's path helps identify critical moments of frustration and delight. This chart compares the typical user experience score (out of 10) at each stage of their interaction with a product.</p>
                            <div class="chart-container">
                                <canvas id="userJourneyChart"></canvas>
                            </div>
                        </div>

                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4 text-center text-secondary-foreground">Business Model Canvas</h3>
                             <p class="text-center text-gray-600 mb-6">This canvas provides a holistic view of the business, mapping key activities, resources, and value propositions to customer segments and revenue streams, highlighting product differentiators.</p>
                            <div class="grid grid-cols-2 gap-3 text-xs">
                                <div class="bg-secondary p-2 rounded"><strong>Key Partners:</strong> Local Farms, Delivery Fleet</div>
                                <div class="bg-secondary p-2 rounded"><strong>Key Activities:</strong> Platform Dev, Logistics, Marketing</div>
                                <div class="bg-secondary p-2 rounded"><strong>Key Resources:</strong> Tech Platform, Warehouse, Drivers</div>
                                <div class="bg-secondary p-2 rounded"><strong>Value Proposition:</strong> Fresh groceries in under 60 mins</div>
                                <div class="bg-accent p-2 rounded col-span-2 text-center"><strong>Cost Structure:</strong> Tech, Salaries, Logistics, Marketing</div>
                                <div class="bg-accent p-2 rounded col-span-2 text-center"><strong>Revenue Streams:</strong> Delivery Fees, Subscriptions, Markups</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Planning & Roadmapping Page -->
            <section id="planning-page" class="page-section py-12">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 space-y-12">
                    <h2 class="text-3xl font-bold text-center mb-2 text-secondary-foreground">Planning & Roadmapping</h2>
                    <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto">With a clear strategy, we move to planning. This involves setting concrete goals using OKRs and creating a flexible roadmap that communicates our direction and priorities over time.</p>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="card p-6 lg:col-span-2">
                            <h3 class="text-xl font-bold mb-4 text-center text-secondary-foreground">Agile Roadmap: Now, Next, Someday</h3>
                            <p class="text-center text-gray-600 mb-6">An agile roadmap focuses on outcomes over outputs, providing a flexible framework to adapt to changing priorities and new learnings.</p>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="border-2 border-primary rounded-lg p-4">
                                    <h4 class="font-black text-lg text-center text-primary">Now</h4>
                                    <p class="text-sm text-center text-gray-600 mb-4">(Current Quarter)</p>
                                    <ul class="text-sm space-y-2 list-disc list-inside">
                                        <li><strong>Goal:</strong> Improve User Onboarding</li>
                                        <li><strong>Initiative:</strong> Redesign sign-up flow</li>
                                        <li><strong>KR:</strong> Increase sign-up completion rate by 20%</li>
                                    </ul>
                                </div>
                                <div class="border-2 border-gray-300 rounded-lg p-4">
                                    <h4 class="font-black text-lg text-center text-gray-600">Next</h4>
                                    <p class="text-sm text-center text-gray-600 mb-4">(Next 1-2 Quarters)</p>
                                    <ul class="text-sm space-y-2 list-disc list-inside">
                                        <li><strong>Goal:</strong> Increase User Engagement</li>
                                        <li><strong>Initiative:</strong> Launch loyalty program</li>
                                        <li><strong>KR:</strong> Improve 30-day retention by 10%</li>
                                    </ul>
                                </div>
                                <div class="border-2 border-gray-300 rounded-lg p-4">
                                    <h4 class="font-black text-lg text-center text-gray-600">Someday</h4>
                                    <p class="text-sm text-center text-gray-600 mb-4">(Future Exploration)</p>
                                    <ul class="text-sm space-y-2 list-disc list-inside">
                                        <li><strong>Goal:</strong> Expand Market Reach</li>
                                        <li><strong>Initiative:</strong> Explore B2B partnerships</li>
                                        <li><strong>KR:</strong> Sign 5 pilot B2B partners</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                         <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4 text-center text-secondary-foreground">OKRs Breakdown</h3>
                            <p class="text-center text-gray-600 mb-6">Objectives and Key Results (OKRs) provide a framework for setting ambitious goals. This radar chart visualizes the focus and resource allocation across different strategic objectives for a quarter.</p>
                            <div class="chart-container">
                                <canvas id="okrChart"></canvas>
                            </div>
                        </div>
                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4 text-center text-secondary-foreground">ICE Score Idea Evaluation</h3>
                            <p class="text-center text-gray-600 mb-6">The ICE (Impact, Confidence, Effort) scoring model helps prioritize features. This bubble chart visualizes ideas, where size represents impact, the y-axis represents confidence, and the x-axis represents the ease (inverse of effort).</p>
                            <div class="chart-container">
                                <canvas id="iceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Execution & Development Page -->
            <section id="execution-page" class="page-section py-12">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 space-y-12">
                    <h2 class="text-3xl font-bold text-center mb-2 text-secondary-foreground">Execution & Development</h2>
                    <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto">This is where ideas become reality. The execution phase involves detailed documentation, writing clear user stories, and managing the development process through sprints and retrospectives.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4 text-center text-secondary-foreground">PRD Structure</h3>
                            <p class="text-center text-gray-600 mb-6">A Product Requirements Document (PRD) is a critical artifact that aligns the team on what to build and why. This chart shows the typical composition of a well-structured PRD.</p>
                            <div class="chart-container">
                                <canvas id="prdChart"></canvas>
                            </div>
                        </div>
                        <div class="card p-6 flex flex-col justify-center">
                            <h3 class="text-xl font-bold mb-4 text-center text-secondary-foreground">User Stories & Acceptance Criteria</h3>
                            <p class="text-center text-gray-600 mb-6">Clear user stories and acceptance criteria are the foundation of agile development, ensuring the team builds the right thing.</p>
                            <div class="bg-secondary p-4 rounded-lg mb-4">
                                <label for="featureIdeaInput" class="block text-sm font-semibold mb-2 text-secondary-foreground">High-level Feature Idea:</label>
                                <textarea id="featureIdeaInput" class="w-full p-2 border border-gray-300 rounded-md text-sm text-gray-800" rows="2" placeholder="e.g., 'Allow users to easily reorder past groceries with one click.'"></textarea>
                                <button id="generateStoryBtn" class="mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-opacity-90 transition-colors flex items-center justify-center mx-auto text-sm">
                                    Generate User Story ✨
                                </button>
                                <div id="storyLoading" class="hidden loading-spinner mt-2 mx-auto"></div>
                            </div>
                            <div id="generatedStoryOutput" class="bg-secondary p-4 rounded-lg hidden">
                                <p class="font-semibold text-secondary-foreground">Generated User Story:</p>
                                <p id="userStoryText" class="italic mb-2 text-gray-600"></p>
                                <p class="font-semibold text-secondary-foreground">Acceptance Criteria:</p>
                                <ul id="acceptanceCriteriaList" class="text-sm list-disc list-inside mt-2 text-gray-600"></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Analysis & Iteration Page -->
            <section id="analysis-page" class="page-section py-12">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 space-y-12">
                    <h2 class="text-3xl font-bold text-center mb-2 text-secondary-foreground">Analysis & Iteration</h2>
                    <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto">Launching is just the beginning. This final phase focuses on analyzing data, setting success metrics, and identifying the "One Metric That Matters" (OMTM) to guide future iterations and product improvements.</p>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="card p-6 flex flex-col items-center justify-center text-center">
                            <h3 class="text-xl font-bold mb-4 text-secondary-foreground">One Metric That Matters (OMTM)</h3>
                            <p class="text-gray-600 mb-6">For a subscription-based app, the OMTM is often tied to long-term value and retention. It's the single number you would look at every day to gauge the health of your product.</p>
                            <div class="kpi-number">75%</div>
                            <p class="font-bold text-lg text-secondary-foreground">Weekly Active Users</p>
                            <p class="text-sm text-gray-600">This metric matters because it indicates that users are finding recurring value in the product, which is a leading indicator for retention and revenue.</p>
                        </div>
                         <div class="card p-6">
                            <h3 class="text-xl font-bold mb-4 text-center text-secondary-foreground">Tracking Success Metrics</h3>
                            <p class="text-center text-gray-600 mb-6">Continuously tracking Key Performance Indicators (KPIs) against goals shows the impact of your work and informs what to build next. This chart tracks user retention over the first 90 days post-launch.</p>
                            <div class="chart-container">
                                <canvas id="metricsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <footer class="bg-secondary-foreground text-primary-foreground text-center py-8 mt-16">
            <p>&copy; 2025 Product Management Hub. All rights reserved.</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const processLabel = (label, maxLength = 16) => {
                if (typeof label !== 'string' || label.length <= maxLength) {
                    return label;
                }
                const words = label.split(' ');
                const lines = [];
                let currentLine = '';
                words.forEach(word => {
                    if ((currentLine + ' ' + word).trim().length > maxLength && currentLine.length > 0) {
                        lines.push(currentLine.trim());
                        currentLine = '';
                    }
                    currentLine += word + ' ';
                });
                lines.push(currentLine.trim());
                return lines;
            };

            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                }
                return label;
            };
            
            const defaultPlugins = {
                legend: {
                    position: 'bottom',
                    labels: {
                        font: { family: 'Inter', size: 12 },
                        color: '#4b5563' /* Secondary Foreground */
                    }
                },
                tooltip: {
                    callbacks: { title: tooltipTitleCallback },
                    bodyFont: { family: 'Inter' },
                    titleFont: { family: 'Inter', weight: 'bold' }
                }
            };

            const colors = {
                primary: '#e05d38',
                primaryForeground: '#ffffff',
                secondary: '#f3f4f6',
                secondaryForeground: '#4b5563',
                accent: '#D3CFCF' /* Using a slightly darker neutral for contrast */
            };

            // Chart Initialization (Moved inside a function to be called when page is active)
            let charts = {};

            function initializeCharts() {
                if (!charts.userJourneyChart) {
                    charts.userJourneyChart = new Chart(document.getElementById('userJourneyChart'), {
                        type: 'bar',
                        data: {
                            labels: ['Awareness', 'Consideration', 'Conversion', processLabel('Customer Service', 16), 'Loyalty'],
                            datasets: [{
                                label: 'User Experience Score (out of 10)',
                                data: [7, 6, 8, 5, 9],
                                backgroundColor: [colors.accent, colors.accent, colors.primary, colors.accent, colors.primary],
                                borderColor: 'white',
                                borderWidth: 2,
                                borderRadius: 4
                            }]
                        },
                        options: {
                            indexAxis: 'y',
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { ...defaultPlugins },
                            scales: {
                                x: { beginAtZero: true, max: 10, grid: { display: false } },
                                y: { grid: { display: false } }
                            }
                        }
                    });
                }

                if (!charts.okrChart) {
                    charts.okrChart = new Chart(document.getElementById('okrChart'), {
                        type: 'radar',
                        data: {
                            labels: [processLabel('Increase Revenue', 16), processLabel('Improve Retention', 16), processLabel('Boost Engagement', 16), processLabel('Expand Market', 16), processLabel('Enhance Performance', 16)],
                            datasets: [{
                                label: 'Q3 Focus',
                                data: [7, 9, 8, 4, 6],
                                backgroundColor: 'rgba(224, 93, 56, 0.2)', /* Primary color with alpha */
                                borderColor: colors.primary,
                                pointBackgroundColor: colors.primary,
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { ...defaultPlugins },
                            scales: {
                                r: {
                                    angleLines: { color: colors.accent },
                                    grid: { color: colors.accent },
                                    pointLabels: { font: { size: 12, family: 'Inter' }, color: colors.secondaryForeground },
                                    ticks: { backdropColor: 'white', color: colors.secondaryForeground }
                                }
                            }
                        }
                    });
                }

                if (!charts.iceChart) {
                    charts.iceChart = new Chart(document.getElementById('iceChart'), {
                        type: 'bubble',
                        data: {
                            datasets: [{
                                label: processLabel('Feature Idea 1: AI Recipes', 16),
                                data: [{ x: 8, y: 9, r: 25 }],
                                backgroundColor: 'rgba(224, 93, 56, 0.7)' /* Primary color with alpha */
                            }, {
                                label: processLabel('Feature Idea 2: Gamification', 16),
                                data: [{ x: 5, y: 6, r: 15 }],
                                backgroundColor: 'rgba(75, 85, 99, 0.7)' /* Secondary Foreground with alpha */
                            }, {
                                label: processLabel('Feature Idea 3: UI Redesign', 16),
                                data: [{ x: 3, y: 7, r: 20 }],
                                backgroundColor: 'rgba(211, 207, 207, 0.7)' /* Accent with alpha */
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { ...defaultPlugins },
                            scales: {
                                y: {
                                    title: { display: true, text: 'Confidence', color: colors.secondaryForeground },
                                    min: 0, max: 10,
                                    ticks: { color: colors.secondaryForeground }
                                },
                                x: {
                                    title: { display: true, text: 'Ease (10 = Easiest)', color: colors.secondaryForeground },
                                    min: 0, max: 10,
                                    ticks: { color: colors.secondaryForeground }
                                }
                            }
                        }
                    });
                }

                if (!charts.prdChart) {
                    charts.prdChart = new Chart(document.getElementById('prdChart'), {
                        type: 'doughnut',
                        data: {
                            labels: [processLabel('Problem & Goal', 16), processLabel('User Journey', 16), processLabel('Functional Requirements', 16), processLabel('Success Metrics', 16), processLabel('Risks & Alternatives', 16)],
                            datasets: [{
                                data: [25, 15, 30, 20, 10],
                                backgroundColor: [colors.primary, colors.secondaryForeground, colors.accent, colors.secondary, '#BDB1D1'],
                                borderColor: 'white',
                                borderWidth: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { ...defaultPlugins },
                            cutout: '50%'
                        }
                    });
                }

                if (!charts.metricsChart) {
                    charts.metricsChart = new Chart(document.getElementById('metricsChart'), {
                        type: 'line',
                        data: {
                            labels: ['Day 0', 'Day 7', 'Day 30', 'Day 60', 'Day 90'],
                            datasets: [{
                                label: 'User Retention %',
                                data: [100, 65, 45, 38, 35],
                                borderColor: colors.primary,
                                backgroundColor: 'rgba(224, 93, 56, 0.1)', /* Primary color with alpha */
                                fill: true,
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { ...defaultPlugins },
                            scales: {
                                y: { beginAtZero: true, max: 100, ticks: { color: colors.secondaryForeground } },
                                x: { ticks: { color: colors.secondaryForeground } }
                            }
                        }
                    });
                }
            }

            const pageSections = document.querySelectorAll('.page-section');
            const navLinks = document.querySelectorAll('.nav-link');
            const exploreBtn = document.getElementById('exploreBtn');

            function showPage(pageId) {
                pageSections.forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(pageId + '-page').classList.add('active');

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.page === pageId) {
                        link.classList.add('active');
                    }
                });

                if (pageId !== 'home') {
                    initializeCharts(); 
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.dataset.page;
                    showPage(pageId);
                });
            });

            exploreBtn.addEventListener('click', () => {
                showPage('strategy');
            });

            // Three.js Hero Background
            let scene, camera, renderer, torus;
            let mouseX = 0, mouseY = 0;
            let windowHalfX = window.innerWidth / 2;
            let windowHalfY = window.innerHeight / 2;

            function initThreeJS() {
                const container = document.getElementById('hero-canvas-container');
                const canvas = document.getElementById('hero-canvas');
                
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true }); // alpha: true for transparent background
                renderer.setSize(container.clientWidth, container.clientHeight);
                renderer.setPixelRatio(window.devicePixelRatio);

                // Torus geometry
                const geometry = new THREE.TorusGeometry(10, 3, 16, 100);
                // Material with primary color
                const material = new THREE.MeshBasicMaterial({ color: 0xe05d38, wireframe: true });
                torus = new THREE.Mesh(geometry, material);
                scene.add(torus);

                camera.position.z = 20;

                // Add subtle particles
                const particlesGeometry = new THREE.BufferGeometry();
                const particlesCount = 500;
                const posArray = new Float32Array(particlesCount * 3);

                for (let i = 0; i < particlesCount * 3; i++) {
                    posArray[i] = (Math.random() - 0.5) * 100;
                }
                particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

                const particlesMaterial = new THREE.PointsMaterial({
                    size: 0.1,
                    color: 0xffffff,
                    transparent: true,
                    opacity: 0.8
                });
                const particleMesh = new THREE.Points(particlesGeometry, particlesMaterial);
                scene.add(particleMesh);

                document.addEventListener('mousemove', onDocumentMouseMove);
                window.addEventListener('resize', onWindowResize);

                animateThreeJS();
            }

            function onDocumentMouseMove(event) {
                mouseX = (event.clientX - windowHalfX);
                mouseY = (event.clientY - windowHalfY);
            }

            function onWindowResize() {
                const container = document.getElementById('hero-canvas-container');
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
                windowHalfX = window.innerWidth / 2;
                windowHalfY = window.innerHeight / 2;
            }

            function animateThreeJS() {
                requestAnimationFrame(animateThreeJS);

                torus.rotation.x += 0.005;
                torus.rotation.y += 0.005;

                // Subtle camera movement based on mouse
                camera.position.x += (mouseX * 0.001 - camera.position.x) * 0.05;
                camera.position.y += (-mouseY * 0.001 - camera.position.y) * 0.05;
                camera.lookAt(scene.position);

                renderer.render(scene, camera);
            }

            // Call initThreeJS when the window loads to ensure canvas is ready
            window.onload = initThreeJS;


            // Gemini API Integration Logic
            const apiKey = ""; 
            const apiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=";

            // Generate Vision Statement
            const generateVisionBtn = document.getElementById('generateVisionBtn');
            const productNameInput = document.getElementById('productNameInput');
            const productValueInput = document.getElementById('productValueInput');
            const productVisionOutput = document.getElementById('productVisionOutput');
            const visionLoading = document.getElementById('visionLoading');

            generateVisionBtn.addEventListener('click', async () => {
                const productName = productNameInput.value;
                const productValue = productValueInput.value;

                if (!productName || !productValue) {
                    productVisionOutput.textContent = "Please enter product name and what it does.";
                    return;
                }

                visionLoading.classList.remove('hidden');
                generateVisionBtn.disabled = true;
                productVisionOutput.textContent = "Generating...";

                try {
                    const prompt = `Given a product named "${productName}" that "${productValue}", generate a concise and inspiring product vision statement (1-2 sentences).`;
                    const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                    const payload = { contents: chatHistory };

                    const response = await fetch(apiUrl + apiKey, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        productVisionOutput.textContent = result.candidates[0].content.parts[0].text;
                    } else {
                        productVisionOutput.textContent = "Failed to generate vision. Please try again.";
                    }
                } catch (error) {
                    console.error("Error generating vision:", error);
                    productVisionOutput.textContent = "Error generating vision. Please check console.";
                } finally {
                    visionLoading.classList.add('hidden');
                    generateVisionBtn.disabled = false;
                }
            });

            // Generate User Story
            const generateStoryBtn = document.getElementById('generateStoryBtn');
            const featureIdeaInput = document.getElementById('featureIdeaInput');
            const generatedStoryOutput = document.getElementById('generatedStoryOutput');
            const userStoryText = document.getElementById('userStoryText');
            const acceptanceCriteriaList = document.getElementById('acceptanceCriteriaList');
            const storyLoading = document.getElementById('storyLoading');

            generateStoryBtn.addEventListener('click', async () => {
                const featureIdea = featureIdeaInput.value;

                if (!featureIdea) {
                    userStoryText.textContent = "Please enter a high-level feature idea.";
                    generatedStoryOutput.classList.remove('hidden');
                    return;
                }

                storyLoading.classList.remove('hidden');
                generateStoryBtn.disabled = true;
                generatedStoryOutput.classList.remove('hidden');
                userStoryText.textContent = "Generating...";
                acceptanceCriteriaList.innerHTML = ''; 

                try {
                    const prompt = `Given the high-level feature idea: "${featureIdea}", generate one user story in the format "As a [user role], I want to [action] so that [benefit]." Then, provide 3 clear acceptance criteria for this user story. Format the output as:
User Story: [Your Story]
Acceptance Criteria:
- [Criteria 1]
- [Criteria 2]
- [Criteria 3]`;
                    const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                    const payload = { contents: chatHistory };

                    const response = await fetch(apiUrl + apiKey, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content[0].content.parts.length > 0) {
                        const generatedText = result.candidates[0].content.parts[0].text;
                        const lines = generatedText.split('\n').filter(line => line.trim() !== '');

                        let storyFound = false;
                        lines.forEach(line => {
                            if (line.startsWith('User Story:')) {
                                userStoryText.textContent = line.replace('User Story:', '').trim();
                                storyFound = true;
                            } else if (storyFound && line.startsWith('-')) {
                                const listItem = document.createElement('li');
                                listItem.textContent = line.replace('-', '').trim();
                                acceptanceCriteriaList.appendChild(listItem);
                            }
                        });

                        if (!storyFound) {
                            userStoryText.textContent = "Could not parse generated story. Raw output: " + generatedText;
                        }
                    } else {
                        userStoryText.textContent = "Failed to generate user story. Please try again.";
                    }
                } catch (error) {
                    console.error("Error generating user story:", error);
                    userStoryText.textContent = "Error generating user story. Please check console.";
                } finally {
                    storyLoading.classList.add('hidden');
                    generateStoryBtn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>
